{{- if .Values.grafanaDashboard }}
apiVersion: v1
kind: List
items:
{{- range .Values.grafanaDashboard }}
- apiVersion: integreatly.org/v1alpha1
  kind: GrafanaDashboard
  metadata:
    name: {{ .name }}
    labels:
      app: {{ template "grafana-operator.name" $ }}
      chart: {{ template "grafana-operator.chart" $ }}
      release: {{ $.Release.Name }}
  spec:
    name: {{ .name }}.json
    json:
    {{- if .jsonTemplated }}
      {{ toYaml (tpl .json $) | nindent 6 }}
    {{ else }}
      {{ toYaml .json | nindent 6 }}
    {{- end }}
    {{- if .url }}
    url: {{ .url }}
    {{- end }}
    {{- with .datasources }}
    datasources:
      {{ toYaml . | nindent 6 }}
    {{- end }}
    {{- with .plugins }}
    plugins:
      {{ toYaml . | nindent 6 }}
    {{- end }}
    {{- with .configMapRef }}
    configMapRef:
      {{ toYaml . | nindent 6 }}
    {{- end }}
{{- end }}
{{- end }}